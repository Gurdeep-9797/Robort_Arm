# ESP32 Robot Arm - Complete Setup Guide for Beginners

## What You'll Build
A web-controlled robotic arm using ESP32 that you can control from your phone or computer.

---

## Part 1: Install Software on Your Computer

### Step 1: Install VS Code (5 minutes)

**What is VS Code?**
- It's a free program where you write and upload code to the ESP32
- Think of it like Microsoft Word, but for programming

**How to Install:**
1. Open your web browser
2. Go to: `https://code.visualstudio.com/`
3. Click the big blue **"Download"** button
4. Wait for download to finish
5. Double-click the downloaded file
6. Click **"Next"** ‚Üí **"Next"** ‚Üí **"Install"**
7. When done, click **"Finish"**
8. VS Code will open automatically

---

### Step 2: Install PlatformIO Extension (10 minutes)

**What is PlatformIO?**
- It's a helper tool that makes ESP32 programming easy
- It downloads all the necessary files for you

**How to Install:**
1. In VS Code, look at the **left sidebar**
2. Click the **Extensions** icon (looks like 4 squares) 
   - OR press `Ctrl + Shift + X`
3. In the search box at the top, type: `platformio`
4. Find **"PlatformIO IDE"** (should be first result)
5. Click the blue **"Install"** button
6. Wait 3-5 minutes (downloads many files)
7. When it says **"Reload Required"**, click it
8. VS Code will restart
9. You'll see a new icon on the left (alien head) - that's PlatformIO!

---

### Step 3: Install Git (5 minutes)

**What is Git?**
- A tool that saves your work and tracks changes
- Like "Track Changes" in Microsoft Word, but better

**How to Install:**
1. Go to: `https://git-scm.com/`
2. Click **"Download for Windows"** (or Mac/Linux)
3. Double-click the downloaded file
4. Keep clicking **"Next"** (accept all defaults)
5. Click **"Install"**
6. Click **"Finish"**
7. Restart your computer

---

## Part 2: Create Your Project in VS Code

### Step 1: Create New Project (3 minutes)

1. Open VS Code
2. Click the **PlatformIO icon** on left sidebar (alien head)
3. Click **"New Project"** (or **"PIO Home"** ‚Üí **"New Project"**)
4. Fill in the form:
   - **Name:** `ESP32_RobotArm` (no spaces!)
   - **Board:** Type `esp32` in search ‚Üí Select **"Espressif ESP32 Dev Module"**
   - **Framework:** Select **"Arduino"**
   - **Location:** Leave as default
5. Click **"Finish"**
6. Wait 1-2 minutes (creates project structure)

**What Just Happened?**
VS Code created a folder with these subfolders:
- `include/` - Where header files (.h) go
- `src/` - Where main code files (.cpp) go
- `lib/` - Where libraries go (ignore this)
- `platformio.ini` - Project settings file

---

### Step 2: Add Configuration File (2 minutes)

1. In VS Code, look at the **left sidebar** (Explorer panel)
2. Find and click on file: `platformio.ini`
3. **Delete everything** in that file
4. Copy and paste this **EXACTLY**:

```ini
[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino

monitor_speed = 115200
upload_speed = 921600

lib_deps = 
    me-no-dev/ESP Async WebServer@^1.2.3
    me-no-dev/AsyncTCP@^1.1.1
    bblanchon/ArduinoJson@^6.21.0
    madhephaestus/ESP32Servo@^0.13.0

build_flags = 
    -D CONFIG_FREERTOS_HZ=1000
    -D ARDUINO_LOOP_STACK_SIZE=8192

board_build.filesystem = spiffs
```

5. Press `Ctrl + S` to save

**What This Does:**
- Tells PlatformIO which ESP32 board you have
- Lists all the libraries (helpers) your code needs
- Sets upload speed and other technical settings

---

### Step 3: Create Header Files (5 minutes)

**What are Header Files?**
- Files ending in `.h` that define what your code can do
- Like a table of contents for your code

**Create RobotCore.h:**
1. Right-click on the `include/` folder
2. Click **"New File"**
3. Name it: `RobotCore.h`
4. Copy the code from the **RobotCore.h artifact** above
5. Paste into the file
6. Press `Ctrl + S` to save

**Create RobotUI.h:**
1. Right-click on `include/` folder again
2. Click **"New File"**
3. Name it: `RobotUI.h`
4. Copy code from **RobotUI.h artifact** above
5. Paste and save (`Ctrl + S`)

---

### Step 4: Create Source Code Files (10 minutes)

**What are .cpp Files?**
- Files with the actual working code
- These tell the ESP32 what to do step-by-step

**Create RobotCore.cpp:**
1. Right-click on `src/` folder
2. Click **"New File"**
3. Name it: `RobotCore.cpp`
4. Copy code from **RobotCore.cpp artifact** above
5. Paste and save

**Create RobotUI.cpp:**
1. Right-click on `src/` folder
2. Click **"New File"**
3. Name it: `RobotUI.cpp`
4. Copy code from **RobotUI.cpp artifact**
5. Paste and save

**Update main.cpp:**
1. In `src/` folder, click on existing `main.cpp` file
2. **Delete everything** in it
3. Copy code from **main.cpp artifact** above
4. Paste it
5. **IMPORTANT:** Find this line (near top):
   ```cpp
   const char* WIFI_SSID = "YOUR_WIFI_NAME";
   const char* WIFI_PASSWORD = "YOUR_WIFI_PASSWORD";
   ```
6. Replace `YOUR_WIFI_NAME` with your actual WiFi name (keep the quotes!)
7. Replace `YOUR_WIFI_PASSWORD` with your actual WiFi password
8. Save the file (`Ctrl + S`)

**Example:**
```cpp
const char* WIFI_SSID = "MyHomeWiFi";
const char* WIFI_PASSWORD = "SecretPassword123";
```

---

### Step 5: Create Web Interface Files (10 minutes)

**What are These?**
- HTML = Structure of the web page
- CSS = Colors and design
- JavaScript = Makes buttons work

**First, Create the data/ Folder:**
1. In the **left sidebar**, right-click on `ESP32_RobotArm` (project root)
2. Click **"New Folder"**
3. Name it exactly: `data` (lowercase, no spaces)

**Create index.html:**
1. Right-click on the new `data/` folder
2. Click **"New File"**
3. Name it: `index.html`
4. Copy code from **index.html artifact** above
5. Paste and save

**Create app.js:**
1. Right-click on `data/` folder
2. Click **"New File"**
3. Name it: `app.js`
4. Copy code from **app.js artifact**
5. Paste and save

**Create style.css:**
1. Right-click on `data/` folder
2. Click **"New File"**
3. Name it: `style.css`
4. Copy code from **style.css artifact**
5. Paste and save

---

## Part 3: Build and Upload Code

### Step 1: Build the Project (Test if code works)

1. Click the **PlatformIO icon** (alien head) on left
2. Find **PROJECT TASKS** section
3. Expand **"env:esp32dev"**
4. Click **"Build"**
5. Wait 5-10 minutes (first time is slow)
6. Watch the **bottom terminal** for progress
7. Look for **"SUCCESS"** message at the end

**If You See Errors:**
- Read the error message carefully
- Common fixes:
  - Make sure all files are saved (`Ctrl + S`)
  - Check WiFi credentials are in quotes
  - Make sure all files have correct names
  - Try **"Clean"** then **"Build"** again

---

### Step 2: Connect ESP32 to Computer

1. Get a **USB cable** (must be data cable, not charge-only)
2. Plug small end into ESP32
3. Plug other end into your computer USB port
4. ESP32 should light up

**Install Driver (Windows Only):**
If ESP32 doesn't show up:
1. Go to: `https://www.silabs.com/developers/usb-to-uart-bridge-vcp-drivers`
2. Download CP210x driver
3. Install it
4. Restart computer
5. Reconnect ESP32

---

### Step 3: Upload Web Files (5 minutes)

**This uploads the web interface to ESP32:**

1. In PlatformIO ‚Üí PROJECT TASKS
2. Click **"Platform"** to expand it
3. Click **"Build Filesystem Image"**
4. Wait for it to finish
5. Click **"Upload Filesystem Image"**
6. Wait for upload (shows progress bar)
7. Look for **"SUCCESS"**

---

### Step 4: Upload Main Code (5 minutes)

1. In PROJECT TASKS
2. Click **"Upload"** under **"General"**
3. Wait for upload (takes 1-2 minutes)
4. ESP32 will restart automatically

---

### Step 5: Open Serial Monitor (See what ESP32 is doing)

1. In PROJECT TASKS
2. Click **"Monitor"** under **"General"**
3. A terminal will open at bottom showing ESP32 messages
4. You should see:
   ```
   ESP32 Robotic Arm Firmware v1.0
   [1/9] Initializing Configuration...
   ‚úì Config OK
   ...
   WiFi Connected!
   IP Address: 192.168.1.XXX
   >>> Open browser to: http://192.168.1.XXX
   System Ready!
   ```
5. **Write down the IP address!**

---

## Part 4: Test the Web Interface

### Step 1: Open Web Browser

1. On the same computer (or phone on same WiFi)
2. Open any web browser (Chrome, Firefox, Safari)
3. In address bar, type: `http://192.168.1.XXX`
   - Replace XXX with your ESP32's IP address
4. Press Enter
5. You should see the **"ESP32 Robot Arm Control"** page!

---

### Step 2: Test Status (No hardware needed yet)

1. Look at **"System Status"** card
2. You should see:
   - Mode: MODE_1_OPEN_LOOP
   - Homed: No
   - Moving: No
   - Connection indicator: Green dot = Connected

---

## Part 5: Connect Hardware (Do This Carefully!)

### ‚ö†Ô∏è SAFETY WARNING
- **NEVER** power servos from ESP32 pins!
- Use external 5-6V power supply (10A minimum)
- Keep E-stop button accessible
- Test one joint at a time
- Start with small movements

---

### Wiring Diagram

```
SERVO CONNECTIONS:
Joint 0: GPIO 25 ‚Üí Servo 0 signal wire (yellow/orange)
Joint 1: GPIO 26 ‚Üí Servo 1 signal wire
Joint 2: GPIO 27 ‚Üí Servo 2 signal wire
Joint 3: GPIO 14 ‚Üí Servo 3 signal wire
Joint 4: GPIO 12 ‚Üí Servo 4 signal wire
Joint 5: GPIO 13 ‚Üí Servo 5 signal wire

SERVO POWER (VERY IMPORTANT!):
All servo RED wires ‚Üí External 5-6V power supply (+)
All servo BLACK wires ‚Üí External power supply (-)
ESP32 GND ‚Üí External power supply (-) [CONNECT GROUNDS!]

ENCODERS (Optional - for MODE 2):
Joint 0: GPIO 32 (A), GPIO 33 (B)
Joint 1: GPIO 35 (A), GPIO 34 (B)
Joint 2: GPIO 36 (A), GPIO 39 (B)
Joint 3: GPIO 21 (A), GPIO 22 (B)
Joint 4: GPIO 16 (A), GPIO 17 (B)
Joint 5: GPIO 18 (A), GPIO 19 (B)

E-STOP BUTTON:
GPIO 4 ‚Üí E-stop button ‚Üí GND
(Button should be normally-closed)
```

---

### Wiring Steps

1. **DISCONNECT ESP32 FROM COMPUTER**
2. Wire ONE servo first:
   - Yellow/Orange wire ‚Üí ESP32 GPIO 25
   - Red wire ‚Üí External 5V power (+)
   - Black/Brown wire ‚Üí External 5V power (-)
3. Connect ESP32 GND to power supply GND
4. Double-check all connections
5. Connect external power supply (turn it ON)
6. Reconnect ESP32 to computer USB
7. Open Serial Monitor to check for errors

---

## Part 6: Test Motion

### Test Single Servo (Start Small!)

1. Open web interface in browser
2. Look for **"Joint Control"** section
3. You'll see sliders for each joint
4. **Slowly** move the slider for Joint 0
5. Servo should move smoothly
6. Try moving it back
7. Click **"STOP ALL"** button to test emergency stop

**If Servo Doesn't Move:**
- Check signal wire connection (GPIO 25)
- Check power supply is ON and outputting 5-6V
- Check ground connection between ESP32 and power supply
- Look at Serial Monitor for error messages

---

### Test All Servos

Once one servo works:
1. **Power OFF everything**
2. Wire remaining servos (same pattern)
3. Power back ON
4. Test each servo individually
5. Test moving multiple servos together

---

## Part 7: Using GitHub for Version Control

### What is Version Control?
- Saves every version of your code
- You can go back to old versions if something breaks
- Backs up your work online

---

### Setup GitHub in VS Code

1. Press `Ctrl + Shift + G` (opens Source Control)
2. Click **"Initialize Repository"**
3. Click **"Publish to GitHub"**
4. Sign in to GitHub (creates account if needed)
5. Name repository: `ESP32-Robot-Arm`
6. Choose **Private** (only you can see it)
7. Click **OK**

---

### Save Your Work (Commit & Push)

**Every time you make changes:**

1. Press `Ctrl + Shift + G` (Source Control panel)
2. You'll see all changed files listed
3. In the message box at top, type what you changed:
   - Example: "Added servo control"
   - Example: "Fixed WiFi connection"
4. Click the **‚úì Commit** button (or `Ctrl + Enter`)
5. Click **"Sync Changes"** button (uploads to GitHub)

**Your code is now backed up online!**

---

### See Your Code on GitHub

1. Open web browser
2. Go to: `https://github.com/`
3. Sign in
4. Click on `ESP32-Robot-Arm` repository
5. You can see all your files online!

---

## Part 8: Using the Robot

### Web Interface Guide

**System Status Card:**
- Shows current mode (MODE 1 or MODE 2)
- Shows if robot is homed
- Shows if motion is active
- Shows any fault codes

**Emergency Controls:**
- **STOP ALL:** Stops current motion smoothly
- **E-STOP:** Immediate emergency stop (disables servos)
- **Clear Fault:** Clears errors and re-enables motion

**Joint Control:**
- Sliders for each joint (0-5)
- Shows current angle in degrees
- Drag slider to move joint
- Changes happen immediately

**Cartesian Control (MODE 2 only):**
- Enter X, Y, Z coordinates in millimeters
- Click "Move Linear" for straight-line motion
- Click "Move on Plane" to stay on defined surface

**Plane Definition:**
- Enter 3 points (X,Y,Z) to define a flat surface
- Robot can move along this surface
- Useful for drawing, picking objects from table, etc.

**Mode Selection:**
- MODE 1: Simple open-loop (no encoders needed)
- MODE 2: Advanced closed-loop (requires encoders and homing)

---

## Part 9: Troubleshooting

### Problem: VS Code Won't Build

**Solution:**
1. Check all files are saved (File ‚Üí Save All)
2. Try: PlatformIO ‚Üí Clean
3. Then: PlatformIO ‚Üí Build
4. Check WiFi credentials have quotes
5. Make sure file names are exact (case-sensitive!)

---

### Problem: ESP32 Not Found During Upload

**Solution:**
1. Check USB cable (must be data cable)
2. Try different USB port
3. Install CP210x driver (Windows)
4. Check ESP32 is powered ON (LED should light)
5. Try pressing and holding BOOT button during upload

---

### Problem: WiFi Won't Connect

**Solution:**
1. Check WiFi name and password are correct
2. ESP32 only works with 2.4GHz WiFi (not 5GHz)
3. Make sure WiFi credentials are in quotes
4. Move ESP32 closer to router
5. Check Serial Monitor for exact error

---

### Problem: Web Interface Won't Load

**Solution:**
1. Make sure filesystem was uploaded (Step 3.3)
2. Check you're using correct IP address
3. Try different browser
4. Check computer is on same WiFi network
5. Try: `http://192.168.1.XXX/` (with slash at end)

---

### Problem: Servos Don't Move

**Solution:**
1. Check external power supply is ON
2. Verify power supply outputs 5-6V
3. Check signal wires go to correct GPIO pins
4. Verify ground connection between ESP32 and power supply
5. Look at Serial Monitor for errors
6. Try manual test: In RobotCore.cpp, add to setup():
   ```cpp
   ServoController::getInstance().writePosition(0, 90);
   ```

---

### Problem: Servos Jitter or Act Weird

**Solution:**
1. Power supply needs 10A capacity minimum
2. Add bulk capacitors (1000¬µF) near each servo
3. Keep signal wires short (<30cm)
4. Route signal wires away from power wires
5. Ensure solid ground connections

---

## Part 10: Next Steps

### Once Basic System Works:

1. **Calibrate Robot:**
   - Measure actual robot dimensions
   - Update DH parameters in RobotCore.cpp
   - Test cartesian moves for accuracy

2. **Test MODE 2:**
   - Wire encoders
   - Home robot using web interface
   - Switch to MODE 2
   - Test closed-loop control

3. **Advanced Features:**
   - Define custom planes
   - Teach and save points
   - Create motion sequences
   - Add custom buttons to web interface

---

## File Summary Checklist

Use this to verify you created everything:

```
ESP32_RobotArm/
‚îú‚îÄ‚îÄ platformio.ini          ‚úì Created
‚îú‚îÄ‚îÄ include/
‚îÇ   ‚îú‚îÄ‚îÄ RobotCore.h         ‚úì Created
‚îÇ   ‚îî‚îÄ‚îÄ RobotUI.h           ‚úì Created
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.cpp            ‚úì Created (with WiFi credentials!)
‚îÇ   ‚îú‚îÄ‚îÄ RobotCore.cpp       ‚úì Created
‚îÇ   ‚îî‚îÄ‚îÄ RobotUI.cpp         ‚úì Created
‚îî‚îÄ‚îÄ data/
    ‚îú‚îÄ‚îÄ index.html          ‚úì Created
    ‚îú‚îÄ‚îÄ app.js              ‚úì Created
    ‚îî‚îÄ‚îÄ style.css           ‚úì Created
```

**Total: 9 files**

---

## Quick Command Reference

### VS Code Keyboard Shortcuts:
- `Ctrl + S` - Save file
- `Ctrl + Shift + P` - Command palette
- `Ctrl + Shift + G` - Source control (Git)
- `Ctrl + `` - Toggle terminal
- `Ctrl + B` - Toggle sidebar

### PlatformIO Tasks:
- **Build** - Compile code (test for errors)
- **Upload** - Upload code to ESP32
- **Monitor** - Open Serial Monitor
- **Clean** - Delete old build files
- **Build Filesystem Image** - Prepare web files
- **Upload Filesystem Image** - Upload web files

---

## Getting Help

### If You're Stuck:

1. **Read error messages carefully** in Serial Monitor
2. **Check this guide** step-by-step
3. **Google the error message** (usually very helpful!)
4. **Check wiring** - 90% of problems are wiring
5. **Test one thing at a time** - don't change multiple things

### Common Questions:

**Q: Can I use different GPIO pins?**
A: Yes, but you must update the pin numbers in RobotCore.cpp

**Q: Do I need encoders?**
A: No, MODE 1 works without encoders. MODE 2 requires them.

**Q: Can I control more/fewer than 6 joints?**
A: Yes, but you need to change NUM_JOINTS in RobotCore.h

**Q: How do I add more features?**
A: Start by modifying the web interface (HTML/JS files)

---

## Success Indicators

You know it's working when:
- ‚úì Code builds without errors
- ‚úì ESP32 connects to WiFi
- ‚úì Web interface loads in browser
- ‚úì Green "Connected" indicator shows
- ‚úì Servos respond to slider movements
- ‚úì E-stop button works
- ‚úì No error messages in Serial Monitor

---

## Important Reminders

1. **Always** disconnect power before changing wiring
2. **Never** power servos from ESP32 pins
3. **Always** keep E-stop button accessible
4. **Start** with small movements to test
5. **Save** your work frequently (`Ctrl + S`)
6. **Commit** to GitHub regularly
7. **Test** one component at a time
8. **Read** error messages carefully

---

## Final Words

This is a complex project! Don't expect everything to work perfectly on the first try.

**Take it slow:**
- One step at a time
- Test after each change
- Don't skip steps
- Ask for help when stuck

**Remember:**
- Every expert was once a beginner
- Errors are learning opportunities
- Hardware projects require patience
- The satisfaction of seeing your robot move is worth it!

Good luck! ü§ñüöÄ

---

## Quick Start Summary (After Setup)

Every time you work on the project:

1. Open VS Code
2. Open project folder (File ‚Üí Open Folder ‚Üí ESP32_RobotArm)
3. Connect ESP32 via USB
4. Make your changes
5. Build (test for errors)
6. Upload (send to ESP32)
7. Open Serial Monitor (see what's happening)
8. Test in web browser
9. Commit to GitHub (save your work)

That's it!